{"ast":null,"code":"import _defineProperty from \"/home/pallavi/projects/react/apeda-traceability/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/pallavi/projects/react/apeda-traceability/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/pallavi/projects/react/apeda-traceability/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/pallavi/projects/react/apeda-traceability/src/Screens/User_Setting/create_user/create_user.jsx\";\nimport React, { useState } from \"react\";\nimport TracenetForm from \"../../TraceneForm/tracenetForm\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nimport * as Yup from \"yup\";\nfunction Create_user() {\n  var errors = [];\n  var user_data = JSON.parse(localStorage.getItem(\"user_data\"));\n  var _useState = useState({\n      tracenet_username: \"\",\n      tracenet_password: \"\",\n      user: user_data.id\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setuser = _useState2[1];\n  var initialValues = {\n    tracenet_username: \"\",\n    tracenet_password: \"\",\n    user: user_data.id\n  };\n  var navigate = useNavigate();\n  var validationSchema = Yup.object({\n    tracenet_username: Yup.string().required(\"*Email is required\"),\n    tracenet_password: Yup.string().required(\"*Password is required\")\n  });\n  var handleChange = function handleChange(e) {\n    var _e$target = e.target,\n      name = _e$target.name,\n      value = _e$target.value;\n    setuser(function (prevState) {\n      return _objectSpread({}, prevState, _defineProperty({}, name, value));\n    });\n  };\n  var handleSubmit = function handleSubmit(event) {\n    var form = event.currentTarget;\n    event.preventDefault();\n    axios.post(\"http://localhost:8000/tracenet_user/\", user, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Token \".concat(user_data.key)\n      }\n    }).then(function (res) {\n      localStorage.setItem(\"user_data\", JSON.stringify(_objectSpread({}, user_data, {\n        tracenet_data: res.data\n      })));\n      navigate(\"/dashboard/user-detail\");\n    }).catch(function (err) {\n      Object.values(err.response.data).map(function (data) {\n        errors.push(data);\n      });\n      alert(errors);\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Formik, {\n    initialValues: initialValues,\n    validationSchema: validationSchema,\n    onSubmit: function onSubmit(values, _ref) {\n      var resetForm = _ref.resetForm;\n      axios.post(\"http://localhost:8000/tracenet_user/\", values).then(function (res) {\n        {\n          res.data.key ? console.log(\"data\") : navigate('/');\n        }\n        localStorage.setItem(\"user_data\", JSON.stringify(_objectSpread({}, user_data, {\n          key: res.data.key,\n          username: res.data.username\n        })));\n        navigate(\"/dashboard/user\");\n      }).catch(function (err) {\n        Object.values(err.response.data).map(function (error) {\n          Object.values(error).map(function (data) {\n            errors.push(data);\n          });\n        });\n        alert(errors);\n        resetForm(initialValues);\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }));\n}\nexport default Create_user;","map":{"version":3,"names":["React","useState","TracenetForm","useNavigate","useLocation","axios","Yup","Create_user","errors","user_data","JSON","parse","localStorage","getItem","tracenet_username","tracenet_password","user","id","setuser","initialValues","navigate","validationSchema","object","string","required","handleChange","e","target","name","value","prevState","handleSubmit","event","form","currentTarget","preventDefault","post","headers","Authorization","key","then","res","setItem","stringify","tracenet_data","data","catch","err","Object","values","response","map","push","alert","resetForm","console","log","username","error"],"sources":["/home/pallavi/projects/react/apeda-traceability/src/Screens/User_Setting/create_user/create_user.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport TracenetForm from \"../../TraceneForm/tracenetForm\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nimport * as Yup from \"yup\";\n\nfunction Create_user() {\n\n  const errors = [];\n  const user_data = JSON.parse(localStorage.getItem(\"user_data\"));\n  const [user, setuser] = useState({\n    tracenet_username: \"\",\n    tracenet_password: \"\",\n    user: user_data.id,\n  });\n\n  const initialValues = {\n    tracenet_username: \"\",\n    tracenet_password: \"\",\n    user: user_data.id,\n  }\n\n  const navigate = useNavigate();\n  const validationSchema = Yup.object({\n    tracenet_username: Yup.string()\n      .required(\"*Email is required\"),\n    tracenet_password: Yup.string()\n      .required(\"*Password is required\"),\n  });\n\n  const handleChange = (e) => {\n    var { name, value } = e.target;\n    setuser((prevState) => ({ ...prevState, [name]: value }));\n  };\n\n  const handleSubmit = (event) => {\n    const form = event.currentTarget;\n    event.preventDefault();\n    axios\n      .post(\"http://localhost:8000/tracenet_user/\", user, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Token ${user_data.key}`,\n        },\n      })\n      .then((res) => {\n        localStorage.setItem(\n          \"user_data\",\n          JSON.stringify({ ...user_data, tracenet_data: res.data })\n        );\n        navigate(\"/dashboard/user-detail\");\n      })\n      .catch((err) => {\n        Object.values(err.response.data).map((data) => {\n          errors.push(data);\n        });\n        alert(errors);\n      });\n  };\n\n  return (\n    <div className=\"content-wrapper\">\n        <Formik\n          initialValues={initialValues}\n          validationSchema={validationSchema}\n          onSubmit={(values, { resetForm }) => {\n            axios\n              .post(\"http://localhost:8000/tracenet_user/\", values)\n              .then((res) => {\n\n                {res.data.key ? console.log(\"data\") : navigate('/')}\n                localStorage.setItem(\"user_data\", JSON.stringify({...user_data, key:res.data.key, username: res.data.username}));\n               navigate(\"/dashboard/user\")\n              })\n              .catch((err) => {\n                Object.values(err.response.data).map((error) => {\n                  Object.values(error).map((data) => {\n                    errors.push(data);\n                  });\n                });\n                alert(errors);\n                resetForm(initialValues);\n              });\n          }}\n        ></Formik>\n  \n      {/* <div className=\"user-card col-md-6 offset-md-3\">\n        <div className=\"card card-dark\">\n          <div className=\"card-header\">\n            <h3 className=\"card-title\">Create Tracenet User</h3>\n          </div>\n          <form onSubmit={handleSubmit}>\n            <div className=\"card-body\">\n              <div className=\"form-group\">\n                <label htmlFor=\"exampleInputEmail1\">Tracenet User name</label>\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  id=\"exampleInputEmail1\"\n                  name=\"tracenet_username\"\n                  placeholder=\"Enter email\"\n                  onChange={handleChange}\n                />\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"exampleInputPassword1\">Tracenet Password</label>\n                <input\n                  type=\"password\"\n                  className=\"form-control\"\n                  id=\"exampleInputPassword1\"\n                  name=\"tracenet_password\"\n                  placeholder=\"Password\"\n                  onChange={handleChange}\n                />\n              </div>\n\n              <div className=\"form-check\">\n                <input\n                  type=\"checkbox\"\n                  className=\"form-check-input\"\n                  id=\"exampleCheck1\"\n                />\n                <label className=\"form-check-label\" htmlFor=\"exampleCheck1\">\n                  Check me out\n                </label>\n              </div>\n            </div>\n            <div className=\"card-footer\">\n              <button type=\"submit\" className=\"btn btn-primary\">\n                Submit\n              </button>\n            </div>\n          </form>\n        </div>\n      </div> */}\n    </div>\n  );\n}\n\nexport default Create_user;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}