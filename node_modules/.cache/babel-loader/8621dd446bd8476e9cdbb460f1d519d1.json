{"ast":null,"code":"import _defineProperty from \"/home/pallavi/projects/react/apeda-traceability/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/pallavi/projects/react/apeda-traceability/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/pallavi/projects/react/apeda-traceability/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/pallavi/projects/react/apeda-traceability/src/Screens/downloads/download.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport \"./download.css\";\nimport { Form } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport AWS from \"aws-sdk\";\nfunction Download() {\n  var _useState = useState({}),\n    _useState2 = _slicedToArray(_useState, 2),\n    options = _useState2[0],\n    setOptions = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    post = _useState4[0],\n    setPosts = _useState4[1];\n  var _useState5 = useState(\"Choose Template\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    template = _useState6[0],\n    setTemplate = _useState6[1];\n  AWS.config.update({\n    accessKeyId: \"AKIAURVWDCTDRY2TUYSM\",\n    secretAccessKey: \"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\"\n  });\n  var handleClick = function handleClick(e) {\n    e.preventDefault();\n  };\n  // const client = axios.create({\n  //     baseURL: \"https://localhost:8000/file/\",\n  //     // headers: 'Content-Disposition= 'attachment; filename=%s' % filename\n  // });\n\n  var handleChange = function handleChange(event) {\n    event.persist();\n    var name = event.target.name;\n    var value = event.target.value;\n    console.log(value, options);\n    setOptions(function (values) {\n      return _objectSpread({}, values, _defineProperty({}, name, value));\n    });\n  };\n  var handleDownload = function handleDownload(e) {\n    e.preventDefault();\n    var s3 = new AWS.S3();\n    var params = {\n      Bucket: \"test-glue-ge\",\n      Key: \"excel_files/farmer_registration.xlsx\"\n    };\n    function downloadBlob(blob) {\n      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"farmer_registration.xlsx\";\n      // Convert your blob into a Blob URL (a special url that points to an object in the browser's memory)\n      var blobUrl = URL.createObjectURL(blob);\n      console.log(blobUrl);\n      // Create a link element\n      var link = document.createElement(\"a\");\n      // Set link's href to point to the Blob URL\n      link.href = blobUrl;\n      link.download = name;\n      // Append link to the body\n      document.body.appendChild(link);\n      // Dispatch click event on the link\n      // This is necessary as link.click() does not work on the latest firefox\n      link.dispatchEvent(new MouseEvent(\"click\", {\n        bubbles: true,\n        cancelable: true,\n        view: window\n      }));\n\n      // Remove link from body\n      document.body.removeChild(link);\n    }\n    s3.getObject(params, function (err, data) {\n      if (err) {\n        console.log(err, err.stack);\n      } else {\n        var csvBlob = new Blob([data.Body.toString()], {\n          type: data.ContentDisposition\n        });\n        downloadBlob(csvBlob, \"farmer_registration.xlsx\");\n      }\n    });\n  };\n\n  // useEffect(() => {\n  //     client.get().then((response) => {\n  //        setPosts(response.data);\n  //        console.log(post)\n  //     });\n  //  }, []);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card col-md-6 ml-auto mr-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, \"Select Flow\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"card-title text-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  }, \"Flow Name\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleDownload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Select, {\n    \"aria-label\": \"Default select example\",\n    size: \"lg\",\n    className: \"selectflow\",\n    name: \"flow\",\n    value: options.flow || \"\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }, \"select Flow\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Farmer Registration\",\n    onSelect: function onSelect() {\n      return setTemplate(\"Farmer Registration\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }, \"Farmer Registration\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Internal Inspection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }, \"Internal Inspection\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Lot Creation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 21\n    }\n  }, \"Lot Creation\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Crop Entry\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, \"Crop Entry\")), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 19\n    }\n  }, \"Sign Up\"))))))));\n}\nexport default Download;","map":{"version":3,"names":["React","useState","useEffect","Button","Form","axios","AWS","Download","options","setOptions","post","setPosts","template","setTemplate","config","update","accessKeyId","secretAccessKey","handleClick","e","preventDefault","handleChange","event","persist","name","target","value","console","log","values","handleDownload","s3","S3","params","Bucket","Key","downloadBlob","blob","blobUrl","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","dispatchEvent","MouseEvent","bubbles","cancelable","view","window","removeChild","getObject","err","data","stack","csvBlob","Blob","Body","toString","type","ContentDisposition","flow"],"sources":["/home/pallavi/projects/react/apeda-traceability/src/Screens/downloads/download.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport \"./download.css\";\nimport { Form } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport AWS from \"aws-sdk\";\n\nfunction Download() {\n  const [options, setOptions] = useState({});\n  const [post, setPosts] = useState([]);\n  const [template, setTemplate] = useState(\"Choose Template\");\n\n  AWS.config.update({\n    accessKeyId: \"AKIAURVWDCTDRY2TUYSM\",\n    secretAccessKey: \"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\",\n  });\n\n  const handleClick = (e) => {\n    e.preventDefault();\n  };\n  // const client = axios.create({\n  //     baseURL: \"https://localhost:8000/file/\",\n  //     // headers: 'Content-Disposition= 'attachment; filename=%s' % filename\n  // });\n\n  const handleChange = (event) => {\n    event.persist();\n    const name = event.target.name;\n    const value = event.target.value;\n    console.log(value, options);\n    setOptions((values) => ({ ...values, [name]: value }));\n  };\n\n  const handleDownload = (e) => {\n    e.preventDefault();\n    const s3 = new AWS.S3();\n\n    const params = {\n      Bucket: \"test-glue-ge\",\n      Key: \"excel_files/farmer_registration.xlsx\",\n    };\n    function downloadBlob(blob, name = \"farmer_registration.xlsx\") {\n      // Convert your blob into a Blob URL (a special url that points to an object in the browser's memory)\n      const blobUrl = URL.createObjectURL(blob);\n      console.log(blobUrl)\n      // Create a link element\n      const link = document.createElement(\"a\");\n      // Set link's href to point to the Blob URL\n      link.href = blobUrl;\n      link.download = name;\n      // Append link to the body\n      document.body.appendChild(link);\n      // Dispatch click event on the link\n      // This is necessary as link.click() does not work on the latest firefox\n      link.dispatchEvent(\n        new MouseEvent(\"click\", {\n          bubbles: true,\n          cancelable: true,\n          view: window,\n        })\n      );\n\n      // Remove link from body\n      document.body.removeChild(link);\n    }\n    s3.getObject(params, (err, data) => {\n      if (err) {\n        console.log(err, err.stack);\n      } else {\n        let csvBlob = new Blob([data.Body.toString()], {\n            type: data.ContentDisposition ,\n        });\n        downloadBlob(csvBlob, \"farmer_registration.xlsx\");\n      }\n    });\n  };\n\n  // useEffect(() => {\n  //     client.get().then((response) => {\n  //        setPosts(response.data);\n  //        console.log(post)\n  //     });\n  //  }, []);\n\n  return (\n    <div className=\"content-wrapper\">\n      <div className=\"content\">\n        <div className=\"container-fluid\">\n          <div className=\"card col-md-6 ml-auto mr-auto\">\n            <div className=\"card-header\">Select Flow</div>\n            <div className=\"card-body\">\n              <h6 className=\"card-title text-dark\">Flow Name</h6>\n              <p className=\"card-text\">\n                <Form onSubmit={handleDownload}>\n                  <Form.Select\n                    aria-label=\"Default select example\"\n                    size=\"lg\"\n                    className=\"selectflow\"\n                    name=\"flow\"\n                    value={options.flow || \"\"}\n                    onChange={handleChange}\n                  >\n                    <option>select Flow</option>\n                    <option\n                      value=\"Farmer Registration\"\n                      onSelect={() => setTemplate(\"Farmer Registration\")}\n                    >\n                      Farmer Registration\n                    </option>\n                    <option value=\"Internal Inspection\">\n                      Internal Inspection\n                    </option>\n                    <option value=\"Lot Creation\">Lot Creation</option>\n                    <option value=\"Crop Entry\">Crop Entry</option>\n                  </Form.Select>\n                  <button type=\"submit\" className=\"btn btn-info\">\n                    Sign Up\n                  </button>\n                </Form>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Download;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}